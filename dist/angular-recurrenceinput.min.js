/*! angular-recurrenceinput 06-01-2015 */
!function(a,b,c){"use strict";var d={};d["ridisplay.html"]='<style>\n\n        div.riform h1 {\n            color: #888888;\n            border-bottom: 1px solid #DDDDDD;\n            font-size: 20px;\n            line-height: 1;\n            margin: 0;\n            padding-bottom: 5px;\n            padding-left: 5px;\n        }\n\n        div.riform form {\n            margin-bottom: 0;\n        }\n\n        div.riform .rifield {\n            clear: both;\n        }\n\n            div.riform .rifield .field {\n                float: left;\n                clear: none;\n            }\n\n        div.riform .rilabel {\n            display: block;\n            float: left;\n            font-weight: bold;\n            margin-right: 10px;\n            text-align: right;\n            width: 130px;\n        }\n\n        div.riform .rirtemplate {\n            margin-top: 6px;\n        }\n\n    div.riformfields {\n        min-height: 11em;\n        min-width: 25em;\n    }\n\n    div.riform .rirangeoptions input,\n    div.riform .rimonthlyoptions input,\n    div.riform .riyearlyoptions input {\n        margin: 0;\n    }\n\n    div.riform .riweeklyweekdays .riweeklyweekday input {\n        display: block;\n        margin: 8px auto 0;\n    }\n\n    div.riform .riweeklyweekdays .riweeklyweekday label {\n        display: block;\n    }\n\n    div.riform .riweeklyweekdays .riweeklyweekday {\n        margin-right: 15px;\n        float: left;\n    }\n\n    div.riform input.ricancelbutton {\n        background-image: url(pb_close.png);\n        background-color: transparent;\n        font-size: 0; /* For IE8 */\n        color: transparent;\n        border: none;\n        position: absolute;\n        left: -14px;\n        top: -14px;\n        cursor: pointer;\n        height: 30px;\n        width: 30px;\n    }\n\n    div.rioccurrencesactions .riaddoccurrence #adddate {\n        width: 75%;\n    }\n\n    div.rioccurrencesactions .rioccurancesheader {\n        border-bottom: 1px solid #DDDDDD;\n        line-height: 1.5;\n        clear: both;\n        margin-top: 30px;\n    }\n\n        div.rioccurrencesactions .rioccurancesheader h2 {\n            color: #888888;\n            display: inline;\n            font-size: 18px;\n            font-weight: bold;\n            margin: 0px 0px 5px 5px;\n        }\n\n\n    div.rioccurrences div.batching {\n        font-size: 70%;\n        text-align: center;\n    }\n\n    div.rioccurrences span.current {\n        font-weight: bold;\n    }\n\n    div.riform span.action a {\n        height: 19px;\n        width: 19px;\n        overflow: hidden;\n        float: right;\n        text-indent: 9999px;\n    }\n\n    div.rioccurrences .occurrence {\n        border-top: 1px solid transparent;\n        border-bottom: 1px solid transparent;\n    }\n\n        div.rioccurrences .occurrence:hover {\n            border-top: 1px solid #DDDDDD;\n            border-bottom: 1px solid #DDDDDD;\n        }\n\n        div.rioccurrences .occurrence.start span.rlabel,\n        div.rioccurrences .occurrence.rdate span.rlabel {\n            color: #9CBA9B;\n            margin: 0 5px;\n            font-size: 70%;\n            font-weight: bold;\n        }\n\n        div.rioccurrences .occurrence.exdate {\n            opacity: 0.4;\n            filter: alpha(opacity=40);\n        }\n\n	label.ridisplay {\n		vertical-align: top;\n	}\n	\n    div.ridisplay .occurrence.exdate {\n        display: none;\n    }\n\n    div.rioccurrences .occurrence.rdate {\n        background: #FFFFE0;\n    }\n\n    div.rioccurrences div.occurrence {\n        margin-left: 5px;\n    }\n\n    div.rioccurrences a.rrule,\n    div.rioccurrences a.rdate,\n    div.rioccurrences a.exdate {\n        color: transparent;\n        margin-top: 6px;\n        margin-right: 5px;\n    }\n\n\n    div.rioccurrences a.rrule {\n        background-image: url(delete.png);\n    }\n\n    div.rioccurrences a.rdate {\n        background-image: url(delete.png);\n    }\n\n    div.rioccurrences a.exdate {\n        background-image: url(undelete.png);\n    }\n\n    div.rioccurrencesactions a.rirefreshbutton {\n        background-image: url(refresh.png);\n        color: transparent;\n        margin-top: 4px;\n        margin-right: 5px;\n    }\n\n    div.messagearea,\n    div.errorarea {\n        background-color: red;\n        color: white;\n        font-weight: bold;\n        padding: 2px 10px;\n    }\n\n    div.ributtons .risavebutton {\n        display: block;\n        margin: 30px auto 0;\n    }\n</style>\n\n<div class="ridisplay">\n    <div class="rimain">\n        <input type="checkbox" id="{{name}}enable" name="richeckbox" ng-show="!conf.readOnly" ng-change="enableChanged()" ng-model="ri.enabled" />\n        <label class="ridisplay" for="{{name}}enable" ng-show="!ri.enabled">{{i18n.displayUnactivate}}</label>\n		<label class="ridisplay" ng-show="ri.enabled">{{ri.display}}</label>\n        <a ng-show="!conf.readOnly && ri.enabled" ng-click="ri.showForm()">{{i18n.edit_rules}}</a>\n    </div>\n    <div class="rioccurrences" style="display:none" />\n</div>',d["riform.html"]='        <div class="modal-header" data-ng-show="message">\n            <h4 data-ng-bind="message"></h4>\n        </div>\n        <div class="modal-body">\n            <div class="riform">\n                <form ng-submit="ri.save()">\n                    <h1>{{i18n.title}}</h1>\n                    <div class="messagearea" ng-show="ri.messageAreaText" ng-bind="ri.messageAreaText">\n                    </div>\n                    <div class="rirtemplate">\n                        <label for="{{name}}rtemplate" class="rilabel">\n                            {{i18n.recurrenceType}}\n                        </label>\n                        <select ng-model="ri.rtemplate" name="rirtemplate" class="rifield" ng-options="v as i18n.rtemplate[k] for (k,v) in conf.rtemplate"></select>\n                        <div>\n                            <div class="riformfields">\n                                <div ng-show="ri.showridailyinterval()" class="rifield">\n                                    <label for="{{name}}dailyinterval" class="rilabel">\n                                        {{i18n.dailyInterval1}}\n                                    </label>\n                                    <div class="field">\n                                        <input type="text" size="2"\n                                               value="1"\n                                               ng-model="ri.dailyinterval"\n                                               id="{{name}}dailyinterval" />\n                                        {{i18n.dailyInterval2}}\n                                    </div>\n                                </div>\n                                <div ng-show="ri.showriweeklyinterval()" class="rifield">\n                                    <label for="{{name}}weeklyinterval" class="rilabel">\n                                        {{i18n.weeklyInterval1}}\n                                    </label>\n                                    <div class="field">\n                                        <input type="text" size="2"\n                                               value="1"\n                                               ng-model="ri.weeklyinterval"\n                                               id="{{name}}weeklyinterval" />\n                                        {{i18n.weeklyInterval2}}\n                                    </div>\n                                </div>\n                                <div ng-show="ri.showriweeklyweekdays()" class="rifield riweeklyweekdays">\n                                    <label class="rilabel" for="{{name}}weeklyinterval">{{i18n.weeklyWeekdays}}</label>\n                                    <div class="field">\n                                        <div class="riweeklyweekday" ng-repeat="weekday in conf.orderedWeekdays">\n                                            <input type="checkbox"\n                                                   name="riweeklyweekdays{{weekdays[weekday]}}"\n                                                   id="{{name}}weeklyWeekdays{{weekdays[weekday]}}"\n                                                   ng-model="ri.weeklyweekdays[weekday]" />\n                                            <label for="{{name}}weeklyWeekdays{{weekdays[weekday]}}">{{i18n.shortWeekdays[weekday]}}</label>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div ng-show="ri.showrimonthlyinterval()" class="rifield">\n                                    <label for="rimonthlyinterval" class="rilabel">{{i18n.monthlyInterval1}}</label>\n                                    <div class="field">\n                                        <input type="text" size="2"\n                                               value="1"\n                                               ng-model="ri.monthlyinterval" />\n                                        {{i18n.monthlyInterval2}}\n                                    </div>\n                                </div>\n                                <div ng-show="ri.showrimonthlyoptions()" class="rifield rimonthlyoptions">\n                                    <label for="rimonthlytype" class="rilabel">{{i18n.monthlyRepeatOn}}</label>\n                                    <div class="field">\n                                        <div>\n                                            <input type="radio"\n                                                   value="DAYOFMONTH"\n                                                   ng-model="ri.monthlytype"\n                                                   id="{{name}}monthlytype:DAYOFMONTH" />\n                                            <label for="{{name}}monthlytype:DAYOFMONTH">\n                                                {{i18n.monthlyDayOfMonth1}}\n                                            </label>\n                                            <select ng-model="ri.monthlydayofmonthday" id="{{name}}monthlydayofmonthday"\n                                                    ng-options="o as o for o in [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]"></select>\n                                            {{i18n.monthlyDayOfMonth2}}\n                                        </div>\n                                        <div>\n                                            <input type="radio"\n                                                   value="WEEKDAYOFMONTH"\n                                                   ng-model="ri.monthlytype"\n                                                   id="{{name}}monthlytype:WEEKDAYOFMONTH" />\n                                            <label for="{{name}}monthlytype:WEEKDAYOFMONTH">\n                                                {{i18n.monthlyWeekdayOfMonth1}}\n                                            </label>\n                                            <select ng-model="ri.monthlyweekdayofmonthindex" ng-options="conf.orderIndexes[i] as o for (i,o) in i18n.orderIndexes"></select>\n                                            {{i18n.monthlyWeekdayOfMonth2}}\n                                            <select ng-model="ri.monthlyweekdayofmonth" ng-options="conf.weekdays[o] as i18n.weekdays[o] for o in conf.orderedWeekdays"></select>\n                                            {{i18n.monthlyWeekdayOfMonth3}}\n                                        </div>\n                                    </div>\n                                </div>\n                                <div ng-show="ri.showriyearlyinterval()" class="rifield">\n                                    <label for="riyearlyinterval" class="rilabel">{{i18n.yearlyInterval1}}</label>\n                                    <div class="field">\n                                        <input type="text" size="2"\n                                               value="1"\n                                               ng-model="ri.yearlyinterval" />\n                                        {{i18n.yearlyInterval2}}\n                                    </div>\n                                </div>\n                                <div ng-show="ri.showriyearlyoptions()" class="rifield riyearlyoptions">\n                                    <label for="riyearlyType" class="rilabel">{{i18n.yearlyRepeatOn}}</label>\n                                    <div class="field">\n                                        <div>\n                                            <input type="radio"\n                                                   value="DAYOFMONTH"\n                                                   ng-model="ri.yearlyType"\n                                                   id="{{name}}yearlytype:DAYOFMONTH" />\n                                            <label for="{{name}}yearlytype:DAYOFMONTH">\n                                                {{i18n.yearlyDayOfMonth1}}\n                                            </label>\n                                            <select ng-model="ri.yearlydayofmonthmonth" ng-options="i18n.months.indexOf(m)+1 as m for m in i18n.months"></select>\n                                            {{i18n.yearlyDayOfMonth2}}\n                                            <select ng-model="ri.yearlydayofmonthday"\n                                                    ng-options="o as o for o in [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]"></select>\n                                            {{i18n.yearlyDayOfMonth3}}\n                                        </div>\n                                        <div>\n                                            <input type="radio"\n                                                   value="WEEKDAYOFMONTH"\n                                                   ng-model="ri.yearlyType"\n                                                   id="{{name}}yearlytype:WEEKDAYOFMONTH" />\n                                            <label for="{{name}}yearlytype:WEEKDAYOFMONTH">\n                                                {{i18n.yearlyWeekdayOfMonth1}}\n                                            </label>\n                                            <select ng-model="ri.yearlyweekdayofmonthindex" ng-options="conf.orderIndexes[i] as o for (i,o) in i18n.orderIndexes"></select>\n                                            <label for="{{name}}yearlytype:WEEKDAYOFMONTH">\n                                                {{i18n.yearlyWeekdayOfMonth2}}\n                                            </label>\n                                            <select ng-model="ri.yearlyweekdayofmonthday" ng-options="conf.weekdays[o] as i18n.weekdays[o] for o in conf.orderedWeekdays"></select>\n                                            {{i18n.yearlyWeekdayOfMonth3}}\n                                            <select ng-model="ri.yearlyweekdayofmonthmonth" ng-options="i18n.months.indexOf(m)+1 as m for m in i18n.months"></select>\n                                            {{i18n.yearlyWeekdayOfMonth4}}\n                                        </div>\n                                    </div>\n                                </div>\n                                <div ng-show="ri.showrirangeoptions()" class="rifield rirangeoptions">\n                                    <label class="rilabel">{{i18n.range}}</label>\n                                    <div class="field">\n                                        <div ng-show="conf.hasRepeatForeverButton">\n                                            <input type="radio"\n                                                   value="NOENDDATE"\n                                                   ng-model="ri.rangetype"\n                                                   id="{{name}}rangetype:NOENDDATE" />\n                                            <label for="{{name}}rangetype:NOENDDATE">\n                                                {{i18n.rangeNoEnd}}\n                                            </label>\n                                        </div>\n                                        <div>\n                                            <input type="radio"\n                                                   checked="checked"\n                                                   value="BYOCCURRENCES"\n                                                   ng-model="ri.rangetype"\n                                                   id="{{name}}rangetype:BYOCCURRENCES" />\n                                            <label for="{{name}}rangetype:BYOCCURRENCES">\n                                                {{i18n.rangeByOccurrences1}}\n                                            </label>\n                                            <input type="text" size="3"\n                                                   value="10"\n                                                   ng-model="ri.rangebyoccurrencesvalue" />\n                                            {{i18n.rangeByOccurrences2}}\n                                        </div>\n                                        <div>\n                                            <input type="radio"\n                                                   value="BYENDDATE"\n                                                   ng-model="ri.rangetype"\n                                                   id="{{name}}rangetype:BYENDDATE" />\n                                            <label for="{{name}}rangetype:BYENDDATE">\n                                                {{i18n.rangeByEndDate}}\n                                            </label>\n                                            <input type="text" ng-model="ri.rangebyenddate" datepicker-popup="MM/dd/yyyy" />\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="rioccurrencesactions" ng-show="ri.showrioccurrencesactions">\n                                <div class="rioccurancesheader">\n                                    <h2>{{i18n.preview}}</h2>\n<!--                                    <span class="refreshbutton action">\n                                        <a class="rirefreshbutton" href="#" title="{{i18n.refresh}}">\n                                            {{i18n.refresh}}\n                                        </a>\n                                    </span>-->\n                                </div>\n                            </div>\n                            <div class="rioccurrences">\n                            </div>\n                            <div class="rioccurrencesactions" ng-show="ri.showrioccurrencesactions">\n                                <div class="rioccurancesheader">\n                                    <h2>{{i18n.addDate}}</h2>\n                                </div>\n                                <div class="riaddoccurrence">\n                                    <div class="errorarea" ng-bind="ri.errorsText" ng-show="ri.errorsText"></div>\n                                    <input type="date" name="adddate" id="adddate" />\n                                    <input type="button" name="addaction" id="addaction" value="{{i18n.add}}">\n                                </div>\n                            </div>\n                            <br />\n                        </div>\n                    </div>\n                </form>\n            </div>\n        </div>\n        <div class="modal-footer">\n            <button class="btn btn-primary" data-ng-click="ri.save()">{{i18n.save}}</button>\n            <button class="btn btn-warning" data-ng-click="ri.cancel()">{{i18n.cancel}}</button>\n        </div>\n';var e={},f="en_US";e[f]={displayUnactivate:"Repeat...",displayActivate:"Repeats every",add_rules:"Add",edit_rules:"Edit...",delete_rules:"Delete",add:"Add",refresh:"Refresh",title:"Repeat",preview:"Selected dates",addDate:"Add date",recurrenceType:"Repeats:",dailyInterval1:"Repeat every:",dailyInterval2:"days",weeklyInterval1:"Repeat every:",weeklyInterval2:"week(s)",weeklyWeekdays:"Repeat on:",weeklyWeekdaysHuman:"on:",monthlyInterval1:"Repeat every:",monthlyInterval2:"month(s)",monthlyDayOfMonth1:"Day",monthlyDayOfMonth1Human:"on day",monthlyDayOfMonth2:"of the month",monthlyDayOfMonth3:"month(s)",monthlyWeekdayOfMonth1:"The",monthlyWeekdayOfMonth1Human:"on the",monthlyWeekdayOfMonth2:"",monthlyWeekdayOfMonth3:"of the month",monthlyRepeatOn:"Repeat on:",yearlyInterval1:"Repeat every:",yearlyInterval2:"year(s)",yearlyDayOfMonth1:"Every",yearlyDayOfMonth1Human:"on",yearlyDayOfMonth2:"",yearlyDayOfMonth3:"",yearlyWeekdayOfMonth1:"The",yearlyWeekdayOfMonth1Human:"on the",yearlyWeekdayOfMonth2:"",yearlyWeekdayOfMonth3:"of",yearlyWeekdayOfMonth4:"",yearlyRepeatOn:"Repeat on:",range:"End recurrence:",rangeNoEnd:"Never",rangeByOccurrences1:"After",rangeByOccurrences1Human:"ends after",rangeByOccurrences2:"occurrence(s)",rangeByEndDate:"On",rangeByEndDateHuman:"until",including:", and also",except:", except for",cancel:"Cancel",save:"Save",recurrenceStart:"Start of the recurrence",additionalDate:"Additional date",include:"Include",exclude:"Exclude",remove:"Remove",orderIndexes:["first","second","third","fourth","last"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortWeekdays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDateFormat:"mmmm dd, yyyy",shortDateFormat:"mm/dd/yyyy",unsupportedFeatures:"Warning: This event uses recurrence features not supported by this widget. Saving the recurrence may change the recurrence in unintended ways:",noTemplateMatch:"No matching recurrence template",multipleDayOfMonth:"This widget does not support multiple days in monthly or yearly recurrence",bysetpos:"BYSETPOS is not supported",noRule:"No RRULE in RRULE data",noRepeatEvery:'Error: The "Repeat every"-field must be between 1 and 1000',noEndDate:"Error: End date is not set. Please set a correct value",noRepeatOn:'Error: "Repeat on"-value must be selected',noEndRecurrence:'Error: "End recurrence"-value must be selected',pastEndDate:"Error: End date cannot be before start date",noEndAfterNOccurrences:'Error: The "After N occurrences"-field must be between 1 and 1000',alreadyAdded:"This date was already added",rtemplate:{daily:"Daily",mondayfriday:"Monday and Friday",weekdays:"Weekday",weekly:"Weekly",monthly:"Monthly",yearly:"Yearly"}};var g=function(){function a(a,e){function f(a,b){for(a=a.toString(),b=b||2;a.length<b;)a="0"+a;return a}function h(a,b,c){var d=a.getDate(),e=a.getDay(),g=a.getMonth(),h=a.getFullYear(),i=a.getHours(),j=a.getMinutes(),k=a.getSeconds(),l={d:d,dd:f(d),ddd:c.i18n.shortWeekdays[e],dddd:c.i18n.weekdays[e],m:g+1,mm:f(g+1),mmm:c.i18n.shortMonths[g],mmmm:c.i18n.months[g],yy:String(h).slice(2),yyyy:h,hh:f(i),MM:f(j),ss:f(k)},m=b.replace(q,function(a){return l.hasOwnProperty(a)?l[a]:a.slice(1,a.length-1)});return m}function i(b){var d=a.ri.rtemplate,e=d.rrule,f="";for(var g in s.rtemplate)if(s.rtemplate.hasOwnProperty(g)&&s.rtemplate[g]===d){f=g;break}var i,j,k,l,m,n,o,p,q,r,t,u,v,w,x=s.i18n.rtemplate[f];for(m=0;m<d.fields.length;m++)switch(i=d.fields[m]){case"ridailyinterval":t=a.ri.dailyinterval,"1"!==t&&(e+=";INTERVAL="+t),x=t+" "+s.i18n.dailyInterval2;break;case"riweeklyinterval":t=a.ri.weeklyinterval,"1"!==t&&(e+=";INTERVAL="+t),x=t+" "+s.i18n.weeklyInterval2;break;case"riweeklyweekdays":for(k="",l="",n=0;n<s.weekdays.length;n++)j=a.ri.weeklyweekdays[n],j&&(k&&(k+=",",l+=", "),k+=s.weekdays[n],l+=s.i18n.weekdays[n]);k&&(e+=";BYDAY="+k,x+=" "+s.i18n.weeklyWeekdaysHuman+" "+l);break;case"rimonthlyinterval":t=a.ri.monthlyinterval,"1"!==t&&(e+=";INTERVAL="+t),x=t+" "+s.i18n.monthlyInterval2;break;case"rimonthlyoptions":var y=a.ri.monthlytype;switch(y){case"DAYOFMONTH":q=a.ri.monthlydayofmonthday,e+=";BYMONTHDAY="+q,x+=", "+s.i18n.monthlyDayOfMonth1Human+" "+q+" "+s.i18n.monthlyDayOfMonth2;break;case"WEEKDAYOFMONTH":o=a.ri.monthlyweekdayofmonthindex,q=a.ri.monthlyweekdayofmonth,$.inArray(q,["MO","TU","WE","TH","FR","SA","SU"])>-1&&(e+=";BYDAY="+o+q,x+=", "+s.i18n.monthlyWeekdayOfMonth1Human+" ",x+=" "+s.i18n.orderIndexes[$.inArray(o,s.orderIndexes)],x+=" "+s.i18n.monthlyWeekdayOfMonth2,x+=" "+s.i18n.weekdays[$.inArray(q,s.weekdays)],x+=" "+s.i18n.monthlyDayOfMonth2)}break;case"riyearlyinterval":t=a.ri.yearlyinterval,"1"!==t&&(e+=";INTERVAL="+t),x=t+" "+s.i18n.yearlyInterval2;break;case"riyearlyoptions":switch(u=a.ri.yearlyType){case"DAYOFMONTH":r=a.ri.yearlydayofmonthmonth,q=a.ri.yearlydayofmonthday,e+=";BYMONTH="+r,e+=";BYMONTHDAY="+q,x+=", "+s.i18n.yearlyDayOfMonth1Human+" "+s.i18n.months[r-1]+" "+q;break;case"WEEKDAYOFMONTH":o=a.ri.yearlyweekdayofmonthindex,q=a.ri.yearlyweekdayofmonthday,r=a.ri.yearlyweekdayofmonthmonth,e+=";BYMONTH="+r,$.inArray(q,["MO","TU","WE","TH","FR","SA","SU"])>-1&&(e+=";BYDAY="+o+q,x+=", "+s.i18n.yearlyWeekdayOfMonth1Human,x+=" "+s.i18n.orderIndexes[$.inArray(o,s.orderIndexes)],x+=" "+s.i18n.yearlyWeekdayOfMonth2,x+=" "+s.i18n.weekdays[$.inArray(q,s.weekdays)],x+=" "+s.i18n.yearlyWeekdayOfMonth3,x+=" "+s.i18n.months[r-1],x+=" "+s.i18n.yearlyWeekdayOfMonth4)}break;case"rirangeoptions":var z=a.ri.rangetype;switch(z){case"BYOCCURRENCES":v=a.ri.rangebyoccurrencesvalue,e+=";COUNT="+v,x+=", "+s.i18n.rangeByOccurrences1Human,x+=" "+v,x+=" "+s.i18n.rangeByOccurrences2;break;case"BYENDDATE":w=h(a.ri.rangebyenddate,"yyyymmdd",s);var A=h(a.ri.rangebyenddate,"hhMMss",s);e+=";UNTIL="+w+"T"+A,b===!0&&(e+="Z"),x+=", "+s.i18n.rangeByEndDateHuman,x+=" "+h(a.ri.rangebyenddate,s.i18n.longDateFormat,s)}}if(a.RDATES!==c&&a.RDATES.length>0){for(a.RDATES.sort(),p=[],m=0;m<a.RDATES.length;m++)""!==a.RDATES[m]&&p.push(h(a.RDATES[m],s.i18n.longDateFormat,s));0!==p.length&&(x=x+s.i18n.including+" "+p.join("; "))}if(a.EXDATE!==c&&a.EXDATE.length>0){for(a.EXDATE.sort(),p=[],m=0;m<a.EXDATE.length;m++)""!==a.EXDATE[m]&&p.push(h(a.EXDATES[m],s.i18n.longDateFormat,s));0!==p.length&&(x=x+s.i18n.except+" "+p.join("; "))}return e=e,{result:e,description:x}}function j(b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,t,u,v,w,x,y,z,A,B=[];if(b){e=/INTERVAL=([0-9]+);?/.exec(b),n=e?e[1]:"1",e=/BYDAY=([^;]+);?/.exec(b),o=e?e[1]:"",e=/BYMONTHDAY=([^;]+);?/.exec(b),q=e?e[1].split(","):null,e=/BYMONTH=([^;]+);?/.exec(b),p=e?e[1].split(","):null,e=/COUNT=([0-9]+);?/.exec(b),r=e?e[1]:null,e=/UNTIL=([0-9T]+);?/.exec(b),t=e?e[1]:null,e=/BYSETPOS=([^;]+);?/.exec(b),e&&B.push(s.i18n.bysetpos),f="",g=null;for(d in s.rtemplate)s.rtemplate.hasOwnProperty(d)&&(h=s.rtemplate[d],0===b.indexOf(h.rrule)&&b.length>f.length&&(f=b,g=d));if(f)h=s.rtemplate[g],a.ri.rtemplate=h,l=g;else{for(h in s.rtemplate)if(s.rtemplate.hasOwnProperty(h)){h=s.rtemplate[h];break}B.push(s.i18n.noTemplateMatch)}for(d=0;d<h.fields.length;d++)switch(m=h.fields[d]){case"ridailyinterval":a.ri.dailyinterval=n;break;case"riweeklyinterval":a.ri.weeklyinterval=n;break;case"riweeklyweekdays":for(o=o.split(","),i=0;i<s.weekdays.length;i++)u=s.weekdays[i],j=a.ri.weeklyweekdays[i]=-1!==$.inArray(u,o);break;case"rimonthlyinterval":a.ri.monthlyinterval=n;break;case"rimonthlyoptions":var C="DAYOFMONTH";q&&(C="DAYOFMONTH",q.length>1&&(B.push(s.i18n.multipleDayOfMonth),q=q[0]),a.ri.monthlydayofmonthday=parseInt(q,10)),o&&(C="WEEKDAYOFMONTH",-1!==o.indexOf(",")&&(B.push(s.i18n.multipleDayOfMonth),o=o.split(",")[0]),k=o.slice(0,-2),"+"!==k.charAt(0)&&"-"!==k.charAt(0)&&(k="+"+k),A=o.slice(-2),a.ri.monthlyweekdayofmonthindex=k,a.ri.monthlyweekdayofmonth=A),a.ri.monthlytype=C;break;case"riyearlyinterval":a.ri.yearlyinterval=n;break;case"riyearlyoptions":var D="DAYOFMONTH";q&&(D="DAYOFMONTH",q.length>1&&(B.push(s.i18n.multipleDayOfMonth),q=q[0]),a.ri.yearlydayofmonthmonth=parseInt(p,10),a.ri.yearlydayofmonthday=parseInt(q,10)),o&&(D="WEEKDAYOFMONTH",-1!==o.indexOf(",")&&(B.push(s.i18n.multipleDayOfMonth),o=o.split(",")[0]),k=o.slice(0,-2),"+"!==k.charAt(0)&&"-"!==k.charAt(0)&&(k="+"+k),A=o.slice(-2),a.ri.yearlyweekdayofmonthindex=k,a.ri.yearlyweekdayofmonthday=A,a.ri.yearlyweekdayofmonthmonth=parseInt(p,10)),a.ri.yearlyType=D;break;case"rirangeoptions":var E="NOENDDATE";r&&(E="BYOCCURRENCES",a.ri.rangebyoccurrencesvalue=r),t&&(E="BYENDDATE",w=t.slice(0,4),v=t.slice(4,6),v=parseInt(v,10)-1,u=t.slice(6,8),x=t.slice(9,11),y=t.slice(11,13),z=t.slice(13,15),a.ri.rangebyenddate=new Date(w,v,u,x,y,z)),a.ri.rangetype=E}}else if(B.push(s.i18n.noRule),!c)return-1;return 0!==B.length?(a.ri.messageAreaText=s.i18n.unsupportedFeatures+" "+B.join("; "),1):(a.ri.messageAreaText="",0)}function k(b){var d,e,f;b?(j(b,!0),l()):a.ri.display=s.i18n.noRule,d=a.ri.StartDate,null!==d&&d!==c?(a.ri.monthlydayofmonthday=d.getDate(),e=s.orderIndexes[Math.floor((d.getDate()-1)/7)],f=s.weekdays[d.getDay()],a.ri.monthlyweekdayofmonthindex=e,a.ri.monthlyweekdayofmonth=f,a.ri.yearlydayofmonthmonth=d.getMonth()+1,a.ri.yearlydayofmonthday=d.getDate(),a.ri.yearlyweekdayofmonthindex=e,a.ri.yearlyweekdayofmonthday=f,a.ri.yearlyweekdayofmonthmonth=d.getMonth()+1,a.ri.showrioccurrencesactions=!0):a.ri.showrioccurrencesactions=!1}function l(){var b=i(!0);a.ri.display=s.i18n.displayActivate+" "+b.description,a.xrrule=b.result;a.ri.StartDate}function m(){a.ri.display=s.i18n.displayUnactivate,a.xrrule=null,a.ri.enabled=!1}function n(){var b,c,d;if(b=a.riStartDate,a.ri.messageAreaText="",a.ri.errorsText="",a.ri.showridailyinterval()&&(d=a.ri.dailyinterval,!d||1>d||d>1e3))return a.ri.messageAreaText=s.i18n.noRepeatEvery,!1;if(a.ri.showriweeklyinterval()&&(d=a.ri.weeklyinterval,!d||1>d||d>1e3))return a.ri.messageAreaText=s.i18n.noRepeatEvery,!1;if(a.ri.showrimonthlyinterval()){if(d=a.ri.monthlyinterval,!d||1>d||d>1e3)return a.ri.messageAreaText=s.i18n.noRepeatEvery,!1;if(!a.ri.monthlytype)return a.ri.messageAreaText=s.i18n.noRepeatOn,!1}if(a.ri.showriyearlyinterval()){if(d=a.ri.yearlyinterval,!d||1>d||d>1e3)return a.ri.messageAreaText=s.i18n.noRepeatEvery,!1;if(!a.ri.yearlyType)return a.ri.messageAreaText=s.i18n.noRepeatOn,!1}if("BYOCCURRENCES"==a.ri.rangetype&&(d=a.ri.rangebyoccurrencesvalue,!d||1>d||d>1e3))return a.ri.messageAreaText=s.i18n.noEndAfterNOccurrences,!1;if("BYENDDATE"==a.ri.rangetype){if(c=new Date(a.ri.rangebyenddate),isNaN(c.getTime()))return a.ri.messageAreaText=s.i18n.noEndDate,!1;if(b>c)return a.ri.messageAreaText=s.i18n.pastEndDate,!1}return a.ri.rangetype?!0:(a.ri.messageAreaText=s.i18n.noEndRecurrence,!1)}function o(a,b){a.ri=w.ri,a.i18n=w.i18n,a.conf=w.conf,a.ri.$modalInstance=b,a.name=w.name}function p(){a.ri.enabled=a.xrrule&&!0||!1,k(a.xrrule)}a.ri={rtemplate:g.conf.rtemplate.daily},a.initialXRRule=a.xrrule;var q=/d{1,4}|m{1,4}|hh|MM|ss|yy(?:yy)?|"[^"]*"|'[^']*'/g;if(a.riLocale)for(var r in a.riLocale)g.localize(r,a.riLocale[r]);var s=angular.extend({},g.conf);angular.extend(s,a.riConfig),angular.extend(s,{i18n:b[s.lang],name:a.riName}),a.conf=s;var t,u,v=[];for(u=0;7>u;u++)t=u+s.firstDay,t>6&&(t-=7),v.push(t);$.extend(s,{orderIndexes:["+1","+2","+3","+4","-1"],weekdays:["SU","MO","TU","WE","TH","FR","SA"],orderedWeekdays:v}),a.ri.showridailyinterval=function(){return a.ri.rtemplate&&-1!=a.ri.rtemplate.fields.indexOf("ridailyinterval")},a.ri.showrirangeoptions=function(){return a.ri.rtemplate&&-1!=a.ri.rtemplate.fields.indexOf("rirangeoptions")},a.ri.showriweeklyinterval=function(){return a.ri.rtemplate&&-1!=a.ri.rtemplate.fields.indexOf("riweeklyinterval")},a.ri.showriweeklyweekdays=function(){return a.ri.rtemplate&&-1!=a.ri.rtemplate.fields.indexOf("riweeklyweekdays")},a.ri.showrimonthlyinterval=function(){return a.ri.rtemplate&&-1!=a.ri.rtemplate.fields.indexOf("rimonthlyinterval")
},a.ri.showrimonthlyoptions=function(){return a.ri.rtemplate&&-1!=a.ri.rtemplate.fields.indexOf("rimonthlyoptions")},a.ri.showriyearlyinterval=function(){return a.ri.rtemplate&&-1!=a.ri.rtemplate.fields.indexOf("riyearlyinterval")},a.ri.showriyearlyoptions=function(){return a.ri.rtemplate&&-1!=a.ri.rtemplate.fields.indexOf("riyearlyoptions")},a.enableChanged=function(){a.ri.enabled?(a.ri.showForm(),l()):m()},a.toggleRecurrence=function(){a.ri.enabled&&a.ri.showForm()},a.ri.save=function(){n()&&(a.ri.hideForm(),a.ri.enabled=!0,l()),a.ri.saved=!0},a.ri.cancel=function(){a.ri.hideForm(),a.ri.saved||(a.xrrule=a.initialXRRule),p()};var w=a;o.$inject=["$scope","$modalInstance"],a.ri.showForm=function(){a.ri.enabled&&(a.modal=e.open({backdrop:!0,template:d["riform.html"],controller:o}))},a.ri.hideForm=function(){a.ri.$modalInstance&&a.ri.$modalInstance.close()},a.ical={RDATE:[],EXDATE:[]},a.i18n=a.conf.i18n,angular.extend(a.ri,{dailyinterval:1,weeklyinterval:1,weeklyweekdays:[!1,!1,!1,!1,!1,!1,!1],monthlyinterval:1,monthlydayofmonthday:1,monthlyweekdayofmonthindex:"+1",monthlyweekdayofmonth:"SU",yearlyinterval:1,yearlydayofmonthmonth:1,yearlydayofmonthday:1,yearlyweekdayofmonthindex:"+1",yearlyweekdayofmonthday:"SU",yearlyweekdayofmonthmonth:1}),a.$watch("xrrule",p)}var b={},g={conf:{lang:f,readOnly:!1,firstDay:0,startField:null,startFieldYear:null,startFieldMonth:null,startFieldDay:null,ajaxURL:null,ajaxContentType:"application/json; charset=utf8",ributtonExtraClass:"",hasRepeatForeverButton:!0,rtemplate:{daily:{rrule:"FREQ=DAILY",fields:["ridailyinterval","rirangeoptions"]},mondayfriday:{rrule:"FREQ=WEEKLY;BYDAY=MO,FR",fields:["rirangeoptions"]},weekdays:{rrule:"FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR",fields:["rirangeoptions"]},weekly:{rrule:"FREQ=WEEKLY",fields:["riweeklyinterval","riweeklyweekdays","rirangeoptions"]},monthly:{rrule:"FREQ=MONTHLY",fields:["rimonthlyinterval","rimonthlyoptions","rirangeoptions"]},yearly:{rrule:"FREQ=YEARLY",fields:["riyearlyinterval","riyearlyoptions","rirangeoptions"]}}},localize:function(a,c){b[a]=c},setTemplates:function(a,c){var d,e;g.conf.rtemplate=a;for(d in c)if(c.hasOwnProperty(d))for(e in c[d])c[d].hasOwnProperty(e)&&(b[d].rtemplate[e]=c[d][e])}};for(var h in e)g.localize(h,e[h]);return a.$inject=["$scope","$modal"],{restrict:"E",template:d["ridisplay.html"],scope:{xrrule:"=ngModel",riConfig:"=",riName:"=",EXDATES:"=riExdates",RDATES:"=riRdates",riLocale:"=",riStartDate:"="},link:function(){},controller:a}};"function"==typeof define&&define.amd?define("riDirective",function(){return g}):a.riDirective=g}(window,document);